<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>57.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_to_AT</name>
        <label>Assign to AT</label>
        <locationX>50</locationX>
        <locationY>1079</locationY>
        <assignmentItems>
            <assignToReference>$Record.Case_Assign_To__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Account_Technician__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Total_Counts</name>
        <label>Assign Total Counts</label>
        <locationX>578</locationX>
        <locationY>863</locationY>
        <assignmentItems>
            <assignToReference>TotalATOOO</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_Out_Of_Office_records</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TotalSecATOOO</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_Out_Of_Office_for_Sec_AT</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TotalATSManagerOOO</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_Out_Of_Office_for_AT_s_manager</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AT_and_Sec_AT_Desc</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AT_OOO</name>
        <label>AT OOO</label>
        <locationX>314</locationX>
        <locationY>1079</locationY>
        <assignmentItems>
            <assignToReference>$Record.Case_Assign_To__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Secondary_Account_Technician__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AT_s_Manager_OOO</name>
        <label>AT&apos;s Manager OOO</label>
        <locationX>842</locationX>
        <locationY>1079</locationY>
        <assignmentItems>
            <assignToReference>$Record.Case_Assign_To__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Account_Technician__r.Manager.Manager.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Both_OOO</name>
        <label>Both OOO</label>
        <locationX>578</locationX>
        <locationY>1079</locationY>
        <assignmentItems>
            <assignToReference>$Record.Case_Assign_To__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Account_Technician__r.Manager.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>AT_and_Sec_AT_Desc</name>
        <label>AT and Sec AT Desc</label>
        <locationX>578</locationX>
        <locationY>971</locationY>
        <defaultConnector>
            <targetReference>Update_Case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>AT_not_OOO</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TotalATOOO</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_to_AT</targetReference>
            </connector>
            <label>AT not OOO</label>
        </rules>
        <rules>
            <name>AT_not_null_and_Sec_AT_is_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TotalATOOO</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>TotalSecATOOO</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AT_OOO</targetReference>
            </connector>
            <label>AT OOO and Sec AT not OOO</label>
        </rules>
        <rules>
            <name>AT_and_Sec_AT_OOO</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TotalATOOO</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>TotalSecATOOO</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Both_OOO</targetReference>
            </connector>
            <label>AT and Sec AT OOO</label>
        </rules>
        <rules>
            <name>AT_s_manager_OOOcheck</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TotalATSManagerOOO</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AT_s_Manager_OOO</targetReference>
            </connector>
            <label>AT&apos;s manager OOO</label>
        </rules>
    </decisions>
    <decisions>
        <name>Req_Type_matched_with_Case_routing_Config</name>
        <label>Req Type matched with Case routing Config?</label>
        <locationX>930</locationX>
        <locationY>431</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>No</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Case_Routing_Config</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Out_Of_Office_records</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>TodaysDate</name>
        <dataType>DateTime</dataType>
        <expression>NOW()</expression>
    </formulas>
    <interviewLabel>Update Case AT and Owner {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Update Case AT and Owner</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Case_Routing_Config</name>
        <label>Get Case Routing Config</label>
        <locationX>930</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Req_Type_matched_with_Case_routing_Config</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Request_Type__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Case_Routing_Config__mdt</object>
        <sortField>Request_Type__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Out_Of_Office_for_AT_s_manager</name>
        <label>Get Out Of Office for AT&apos;s manager</label>
        <locationX>578</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Total_Counts</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OwnerId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.Account_Technician__r.Manager.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>TodaysDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>TodaysDate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OOO_Calendar__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Out_Of_Office_for_Sec_AT</name>
        <label>Get Out Of Office for Sec AT</label>
        <locationX>578</locationX>
        <locationY>647</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Out_Of_Office_for_AT_s_manager</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OwnerId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.Secondary_Account_Technician__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>TodaysDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>TodaysDate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OOO_Calendar__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Out_Of_Office_records</name>
        <label>Get Out Of Office records</label>
        <locationX>578</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Out_Of_Office_for_Sec_AT</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OwnerId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.Account_Technician__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Start_Date__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>TodaysDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>End_Date__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>TodaysDate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OOO_Calendar__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Case</name>
        <label>Update Case</label>
        <locationX>578</locationX>
        <locationY>1271</locationY>
        <inputReference>caseToUpdate</inputReference>
    </recordUpdates>
    <start>
        <locationX>804</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Case_Routing_Config</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Dealer Cancellation - Remove Looker Credentials</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Launch Day QA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>7 Launch Day QA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>14 Launch Day QA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Pod Leader - Account Launch QA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Weekly QA</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Facebook Not Yet Live</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Reset Facebook Budgets</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Account Cancellation - Account Cancelled: Run Final Payments &quot;Day after Last Day of Service&quot;</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Winter Sales Event Material</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>President&apos;s Day Sales Event Material</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Monthly Search Term Audit</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Performance Review</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Vehicle Ads Campaigns Ready</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Facebook Campaigns Ready</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Order Inventory</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Service Coupons</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>RPM Sprint</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Failure To Create GTM API ID</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>AT Monthly Deep Dive</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Link Google Ads Account</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>GTM Email Not Sent</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>GTM Not On Site</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>GA4 Build Is Not Complete</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Website Not Verified</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>NCM Member Status</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>NCM Intelligence Scorecard Kickoff</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Business Intelligence Kickoff</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Data Deep Dive</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>PMax Ready to Launch</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>012Nx000001nnmzIAA</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>012Nx000002AKAoIAO</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>012Nx000002AO7xIAG</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>012Nx000002jCaAIAU</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>012Nx0000030jD7IAI</stringValue>
            </value>
        </filters>
        <filters>
            <field>Request_Type__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>AT Recommendation</stringValue>
            </value>
        </filters>
        <object>Case</object>
        <recordTriggerType>Create</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>caseToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>TotalATOOO</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>TotalATSManagerOOO</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>TotalSecATOOO</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
</Flow>
